# 제어할 수 없는 것에 의존하지 않기

저는 약 9년간 직업으로서의 개발자로 활동해왔습니다.  
경력에 비해서 이렇게 저자의 기회도 있는걸 보면 꽤나 운이좋았던것 같습니다.  
SI, 인터넷 포털, O2O 스타트업, 에듀테크 등 여러 분야의 소프트웨어 기업들을 근무하고 팀원, 리드 등의 역할을 해왔습니다.  
  
그러다보니 인터뷰 등에서 "동욱님은 평소에 어떤 기준을 가지고 소프트웨어를 개발하시나요?" 와 같은 질문을 종종 받곤 합니다.  
그때마다 어떻게 대답해야할지, 상당히 망설여집니다.  
왜냐하면 소프트웨어를 만드는데는 하나의 기준만 가지고 진행하지는 않기 때문입니다.  
그간 듣고, 배운 다양한 원칙과 기준들 중에서 어느 것 하나가 최우선이 되어서 개발을 한 적이 제게는 애초에 없었고, 지금도 딱히 그러지는 않습니다.  
  
그래도 가장 자주 적용되는 기준은 있지 않을까 한다면 그건 맞습니다.  
인프랩이라는 조직에 합류하고, Node.js를 처음으로 프로덕션 레벨에서 사용할때도 (Node.js에 대한 숙련도가 낮을때임에도) 당연하게 적용하던 기준들이 있습니다.  
   
그러니깐, 제가 코드 혹은 시스템 설계에 대해 깊게 고민을 할 때 떠올리는 기준이 있는가 하면,  
어떤 기준들은 고민이나 생각을 하지 않는 무의식적인 상태에서도 당연하게 적용되는 기준들이 있습니다.  

그러한 원칙과 기준들은 다음과 같습니다.  
아마도 이미 많은 분들은 아래의 원칙들이나 기준들을 한번쯤은 들어보셨을겁니다. 

* DRY
  * Do not Repeat Yourself
  * 똑같은 기능, 코드를 반복하지말라.
* YAGNI 
  * You Ain't Gonna Need It
  * 그 기능이 필요하기전까지는 미리 만들지 말라.
* KISS 
  * Keep It Simple Stupid
  * 최대한 단순함을 유지해라.



```ts
export default class Order {
    ...
    discount() {
        const now = LocalDateTime.now();
        if (now.dayOfWeek() == DayOfWeek.SUNDAY) {
            this._amount = this._amount * 0.9
        }
    }
}
```

이 코드는 제어할 수 없는 코드인 `now()` 에 의존하고 있습니다.  
그러다보니 실행할때마다 결과가 달라질 수 있습니다.

```ts
export default class Order {
    ...
    // 현재시간(now)를 밖에서 주입받도록 한다.
    discountWith(now: LocalDateTimw) { 
        if (now.dayOfWeek() == DayOfWeek.SUNDAY) {
            this._amount = this._amount * 0.9
        }
    }
}
```

```ts
it('일요일에는 주문 금액이 10% 할인된다', () => {
  const sut = Order.of(10_000, OrderStatus.APPROVAL);
  const now = LocalDateTime.of(2022,8,14,10,15,0); // 2022-08-14 10:15:00 시로 고정
  sut.discountWith(now);

  expect(sut.amount).toBe(9_000);
});
```

어떤 원칙, 기준으로 코드를 작업하고 

그래도 가장 자주 사용하는, 애정하는 원칙이라 하면 "제어할 수 없는 것에 의존하지 않기" 입니다.

개발자로 커리어를 시작하면서 많은 원칙들을 듣고 배우게 된다.

하지만 그 중에서도 개발, 팀 관리 등 여러 부분에서 가장 많이 적용되는 기준은 "제어할 수 없는 것에 의존하지 않기"이다.  

* 데이터베이스 테이블의 주요키 (PK) 에는 주민등록번호, 여권번호 등 아무리 유일한 값이더라도 사용하지 않는다
* 로그인 서비스는 자체 로그인을 꼭 구현한다.
* 특정 팀원에게 많은 일을 위임하지 않는다.
* 외부 투자금에 의존하지 않는 서비스로 이직한다.
* 한명의 영웅에게 의존하기보다는 시스템, 문화, 프로세스에 의존한다.


한번 예를 들어볼까요?  
2020년 12월에 근무중이였던 우아한형제들에서 저희 팀의 모든 프로젝트들이 AWS 이전이 완료 되면서 저는 다음 회사를 고민했습니다.  
이때 역시 이 원칙이 적용 됩니다.  

"투자는 VC들이 결정을 하는 것이고, 나는 제어할 수 없는 것인데,  
다음 투자를 못받으면 어떻게 될까?  
가능하면 투자를 받지 못해도 생존할 수 있는 회사여야겠다."
라는 기준을 선택한 것입니다. 

제가 가장 존경하는 작가님 중에 한분이신 고 장영희 교수님의 저서 "내 생에 단 한번" 을 보면 다음과 같은 내용이 나옵니다.  

