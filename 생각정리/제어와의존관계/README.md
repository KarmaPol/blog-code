# 제어할 수 없는 것에 의존하지 않기

소프트웨어의 원칙에 대해 이야기하라고 하면 저에게는 상당히 어려운 주제인것 같습니다.  
그래서 우선은 가벼운 이야기들을 시작으로해서 진행해보도록 하겠습니다.  
그편이 더 구체적이고 비교적 이야기가 술술 풀려나가지 않을까 생각합니다.  
  
저는 약 9년간 직업으로서의 개발자로 활동해왔습니다.  
경력에 비해서 이렇게 저자의 기회도 있는걸 보면 꽤나 운이 좋았던것 같습니다.    
SI, 인터넷 포털, O2O 스타트업, 에듀테크 등 여러 분야의 소프트웨어 기업들을 근무하고 팀원, 리드 등의 역할을 하다보니 고민 상담의 기회도 꽤나 많았습니다.  
  
취준생이 아닌 현직에서 일을 하시는 분들이 저에게 요청한 고민 중에서 자주 등장하는 질문이 있습니다.  

"일정을 지키고자 버그가 많은 소프트웨어를 출시하는 것이 마음에 들지 않습니다.  
어떻게 하면 일정을 연기해서 안정된 소프트웨어를 내는 것이 더 중요하다고 리더들을 설득할 수 있을까요?"  
와 같은 것입니다.  
  
이런 고민에 대해 저는 항상 윈도우 95의 개발자이신 "나카지마 사토시" 님의 이야기를 전달합니다.  
(아래 문장은 나카지마 사토시님의 저서인 "오늘, 또 일을 미루고 말았다" 에 나옵니다.)

"프로그래머에게 요구되는 것은 100점이 아닌 80~90점짜리 프로그램을 기한 내에 완성하는 일이다."

이렇게만 답변을 마무리 한다면, "퀄리티 보다 일정이 더 중요한것인가" 라고 생각이 될수도 있습니다.  
그래서 항상 덧붙여 이야기하기를, "일정과 퀄리티가 시소 관계라서 어느 한쪽을 포기해야한다가 아니라, **어떻게 하면 아무리 급해도 항상 80~90점의 소프트웨어를 개발할 수 있는지**가 중요하다." 라고 전달합니다.  
  
(저는 나카지마 사토시님을 실제로 뵙진 못했지만, 아마도 저와 같은 의도로 저 이야기를 하신게 아닐까하고 혼자 생각했습니다. 하하)  
  
이런 답변을 받은 분들이 이어서 한 질문은 무엇일까요?  
당연하게도, "그럼 어떻게 하면 항상 80~90점의 소프트웨어를 개발할 수 있나요?" 입니다.  
  
제 주변을 보면 아무리 급한 일정으로 일이 주어져도 항상 80~90점의 소프트웨어를 출시하는 개발자분들이 있었습니다.  
옆에서 쭉 지켜보면 그 분들은 대부분 공통점이 있었습니다.  
  
(이제부터 제가 이 책에서 이야기하고자 하는 내용이 등장할 때인것 같습니다.)   
  
그건 바로 경험과 학습으로 체득된 본인만의 소프트웨어 원칙들이 있었던 것입니다.  
  
예를 들어 누군가는 A 코드가 더 나을지, B 코드가 더 나을지 고민하면서 시간을 보낸다면,    
그 분들은 A 코드와 B 코드 중 현재 상황에 더 적합한 코드를 판별하는 선택 기준과 원칙들이 있어 고민 없이 바로 선택을 할 수 있었던 것이죠.  
그리고 정말 중요한 설계와 선택이 필요할때 더 깊게 시간을 쓸 수 있어, 항상 일정과 퀄리티 양쪽을 잡을 수 있었던것 같습니다.  
  
이런 분들과 함께 일하다보면 자연스레 저의 소프트웨어 원칙들도 되돌아보게 됩니다.  
나는 좋은 원칙들을 알고 있는가?, 그 원칙들이 무의식적으로도 발현될 수 있도록 내재화되어있는가? 등등 말이죠.  

아마 대중적으로 가장 알려진 원칙들이라 하면 DRY, YAGNI, KISS 일것 같습니다.

* DRY
  * Do not Repeat Yourself
  * 똑같은 기능, 코드를 반복하지말라.
* YAGNI 
  * You Ain't Gonna Need It
  * 그 기능이 필요하기전까지는 미리 만들지 말라.
* KISS 
  * Keep It Simple Stupid
  * 최대한 단순함을 유지해라.

이 원칙들이 저에게 가장 중요한 원칙들일까요?  
이 책의 제안을 받고나서 저 스스로도 한번 생각해보게 되었습니다. 

"나는 평소에 어떤 원칙을 가지고 소프트웨어를 개발하는가?
수많은 원칙들 중에서 내가 가장 좋아하는 원칙은 무엇인가?"

이 질문에 대답을 하자니 어떻게 대답해야할지, 상당히 망설여집니다.  
왜냐하면 소프트웨어를 만드는데 하나의 원칙만 가지고 진행하지는 않기 때문입니다.  
그간 듣고, 배운 다양한 원칙과 기준들 중에서 어느 것 하나가 최우선이 되어서 개발을 한 적이 제게는 애초에 없었고, 지금도 딱히 그러지는 않습니다.  
  
위에서 언급한 DRY, YAGNI, KISS 원칙들 역시 계속해서 적용되고 당연하게 사용하지만, 제가 가장 애정하는 원칙이라 하면 그렇지는 않습니다.  
물론 '원칙' 이라 하는 것이 대체로 시각화도, 언어화도 안되는 종류의 것이기 때문에 구체적으로 원칙들간 순위를 메길수는 없겠죠.
그래도 가장 자주 적용되는 원칙은 있지 않을까 한다면 그건 맞습니다.  

인프랩이라는 조직에 합류하고 Node.js를 처음으로 프로덕션 레벨에서 사용할때를 생각해보면, 당시의 저는 Node.js에 대한 숙련도가 낮을때임에도 불구하고 당연하게 적용하던 원칙들이 있었습니다.  
아마도 "언어, 프레임워크가 다르더라도 A 원칙과 B 원칙 등등은 동일하게 적용되지 않겠냐" 하는 저만의 확신이 있었던 것 같습니다.  
  
그러니깐, 저 역시 제가 관찰했던 다른 분들과 마찬가지로 코드와 시스템 설계에 대해 깊게 고민을 할 때 종종 떠올리는 원칙이 있는가 하면, 깊은 고민 없이 무의식적인 상태에서도 당연하게 적용되는 원칙들이 있다는 것입니다.  
  
무의식적으로 쓰는 (혹은 애정하는) 원칙들은 여러가지가 있지만, 그 중에서도 제가 가장 애정하는 원칙은 "제어할 수 없는 것에 의존하지 않기" 입니다.  
  
저는 이 원칙을 "실용주의 프로그래머" (인사이트) 를 통해 처음 알게 되었습니다.  
실용주의 프로그래머 2장을 보면 "자신의 힘으로 제어할 수 없는 속성에 의존하지 말라" 이야기가 나옵니다.  
  
소프트웨어를 개발하는데 있어 "제어할 수 없는 것에 의존하기" 와 같은 원칙은 어떨때 사용될까요?  
실용주의 프로그래머 책에서는 대표적인 사례로 

```ts
export default class Order {
    ...
    discount() {
        const now = LocalDateTime.now();
        if (now.dayOfWeek() == DayOfWeek.SUNDAY) {
            this._amount = this._amount * 0.9
        }
    }
}
```

이 코드는 제어할 수 없는 코드인 `now()` 에 의존하고 있습니다.  
그러다보니 실행할때마다 결과가 달라질 수 있습니다.

```ts
export default class Order {
    ...
    // 현재시간(now)를 밖에서 주입받도록 한다.
    discountWith(now: LocalDateTimw) { 
        if (now.dayOfWeek() == DayOfWeek.SUNDAY) {
            this._amount = this._amount * 0.9
        }
    }
}
```

```ts
it('일요일에는 주문 금액이 10% 할인된다', () => {
  const sut = Order.of(10_000, OrderStatus.APPROVAL);
  const now = LocalDateTime.of(2022,8,14,10,15,0); // 2022-08-14 10:15:00 시로 고정
  sut.discountWith(now);

  expect(sut.amount).toBe(9_000);
});
```



* 데이터베이스 테이블의 주요키 (PK) 에는 주민등록번호, 여권번호 등 아무리 유일한 값이더라도 사용하지 않는다
* 로그인 서비스는 자체 로그인을 꼭 구현한다.
* 특정 팀원에게 많은 일을 위임하지 않는다.
* 외부 투자금에 의존하지 않는 서비스로 이직한다.
* 한명의 영웅에게 의존하기보다는 시스템, 문화, 프로세스에 의존한다.




이 원칙은 정말 여러 곳에서 사용 가능합니다.  
한번 예를 들어볼까요?  
저는 과거에 리그오브레전드 (a.k.a LOL)에 빠진적이 있었습니다.
이 게임을 해보신 분들은 아시겠지만, 

그러다가 갑자기 다음 시즌부터 실버에서 플레티넘까지 티어가 급 상승하게 되었다.

## 코드 설계

## 테이블 설계

## 외부 API 연동

```ts
{
  "paymentKey": "5zJ4xY7m0kODnyRpQWGrN2xqGlNvLrKwv1M9ENjbeoPaZdL6",
  "orderId": "a4CWyWY5m89PNh7xJwhk1",
  "orderName": "토스 티셔츠 외 2건",
  "method": "카드",
  "status": "DONE",
  "requestedAt": "2021-01-01T10:01:30+09:00",
  "approvedAt": "2021-01-01T10:05:40+09:00",
}

```

## 회사 선택

예를 들어 여러분들이 다음 직장 혹은 첫 직장으로 스타트업을 선택한다고 가정해보겠습니다.  
여러 스타트업들의 목록을 보면서 각 회사들이 공통적으로 제어할 수 없는 요소는 무엇일까요?



2020년 12월에 근무중이였던 우아한형제들에서 저희 팀의 모든 프로젝트들이 AWS 이전이 완료 되면서 저는 다음 회사를 고민했습니다.  
이때 역시 이 원칙이 적용 됩니다.  

"투자는 VC들이 결정을 하는 것이고, 나는 제어할 수 없는 것인데,  
다음 투자를 못받으면 어떻게 될까?  
가능하면 투자를 받지 못해도 생존할 수 있는 회사여야겠다."
라는 기준을 선택한 것입니다. 


## 매니지먼트


## 마무리

제어할 수 없는 것에 의존하지 않기 원칙은 

* 
* 바꿀 수 없는 것에 집중하기 보다는 바꿀 수 있는 것에 집중하기
 
제가 가장 존경하는 작가님 중에 한분이신 고 장영희 교수님의 저서 "내 생에 단 한번" 을 보면 다음과 같은 내용이 나옵니다.  

